<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">

        <link rel="shortcut icon" href="/favicon.gif">

        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha256-4+XzXVhsDmqanXGHaHvgh1gMQKX40OUvDEBTu8JcmNs=" crossorigin="anonymous"></script>

        
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous">

        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Ubuntu+Mono&family=Ubuntu:ital,wght@0,400;0,500;1,400;1,500&display=swap" rel="stylesheet">

        <title>Autoscale Policy</title>

        <link rel="stylesheet" href="/css/stylesheet.css">
    </head>
    <body>
      <div class="container-fluid">
        <nav class="navbar navbar-expand-md navbar-light">

          
          <span class="navbar-brand mb-0 h1">
            <a href="/"><img src='/yjlo.png' /></a>
          </span>

          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle Navigation" name="button">
            <span class="navbar-toggler-icon"></span>
          </button>

          <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
            <div class="navbar-nav">
              <a class="nav-item nav-link " href="/">Home</a>
              <a class="nav-item nav-link " href="/leetcode">Leetcode</a>
              
              <a class="nav-item nav-link " href="/about/">About</a>
            </div>
          </div>
        </nav>

        <section id="page-title">
          
        </section>


<div class="blog-post">
  <h1>Autoscale Policy</h1>
  <div class="blog-post-subheader">
    <time>17 Oct 2021</time>
  </div><ul class="tags">
  
   <li>
     <a href="/tags/leetcode">leetcode</a>
   </li>
  
</ul>
<div class="blog-post-content">
    <p>Given an integer, instances, and an array, arr[] of size N representing the average utilization percentage of the computing system at each second, the task is to find the number of instances at the end of the time frame such that the computing system auto-scales the number of instances according to the following rules:</p>
<ul>
<li>Average utilization &lt; 25%: Reduce the number of instances by half if the number of instances is greater than 1.</li>
<li>25% ≤ Average utilization ≤ 60%: Take no action.</li>
<li>Average utilization &gt; 60%: Double the number of instances if the doubled value does not exceed 2* 10<sup>8</sup>.
Once an action of adding or reducing the number of instances is performed, the system will stop monitoring for 10 seconds. During that time, the number of instances does not change.</li>
</ul>
<p><strong>Examples:</strong></p>
<pre tabindex="0"><code>Input: instances = 2, arr[] = {25, 23, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 76, 80}
Output: 2
Explanation:
At second 1, arr[0] = 25 ≤ 25, so take no action.
At second 2, arr[1] = 23 &lt; 25, so an action is instantiated to halve the number of instances to ceil(2/2) = 1.
The system will stop checking for 10 seconds, so from arr[2] through arr[11] no actions will be taken.
At second 13, arr[12] = 76 &gt; 60, so the number of instances is doubled from 1 to 2.

There are no more readings to consider and 2 is the final value.

Input: instances = 5, arr = {30, 5, 4, 8, 19, 89}
Output: 3
Explanation:
At second 1, 25 ≤ arr[0] = 30 ≤ 60, so take no action.
At second 2, arr[1] = 5 &lt; 25, so an action is instantiated to halve the number of instances to ceil(5/2) = 3.
The system will stop checking for 10 seconds, so from arr[2] through arr[5] no actions will be taken.

There are no more readings to consider and 3 is the final answer.
</code></pre><div class="tabs"></div>
<div class="tab-content">
<div id="python" class="lang">
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#00a">from</span> <span style="color:#0aa;text-decoration:underline">math</span> <span style="color:#00a">import</span> ceil

<span style="color:#00a">def</span> <span style="color:#0a0">finalInstances</span>(instances, arr):
    i = <span style="color:#099">0</span>
    <span style="color:#00a">while</span> i &lt; <span style="color:#0aa">len</span>(arr):
        <span style="color:#00a">if</span> arr[i] &lt; <span style="color:#099">25</span> <span style="color:#00a">and</span> instances &gt; <span style="color:#099">1</span>:
            instances = ceil(instances / <span style="color:#099">2</span>)
            i += <span style="color:#099">10</span>
        <span style="color:#00a">elif</span> arr[i] &gt; <span style="color:#099">60</span> <span style="color:#00a">and</span> instances &lt;= <span style="color:#099">10</span>**<span style="color:#099">8</span>:
            instances *= <span style="color:#099">2</span>
            i += <span style="color:#099">10</span>
        i += <span style="color:#099">1</span>
    <span style="color:#0aa">print</span>(instances)</code></pre></td></tr></table>
</div>
</div>
</div>
<div id="java" class="lang">
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#00a">public</span> <span style="color:#0aa">int</span> <span style="color:#0a0">finalinstances</span>(<span style="color:#0aa">int</span> instances, <span style="color:#0aa">int</span> []A) {
    <span style="color:#0aa">int</span> idle = 10, i = 0,n = A.<span style="color:#1e90ff">length</span>;
    <span style="color:#0aa">int</span> l = 1, r = (<span style="color:#0aa">int</span>)(1e8), ans = instances;
    <span style="color:#00a">while</span>(i &lt; n) {
        <span style="color:#00a">if</span>(A[i] &lt; 25 &amp;&amp; ans &gt; 1) {
            ans = (<span style="color:#0aa">int</span>)Math.<span style="color:#1e90ff">ceil</span>(ans/2);
            i = i+idle;
        } <span style="color:#00a">else</span> <span style="color:#00a">if</span>(A[i] &gt; 60 &amp;&amp; A[i] &lt;= r) {
            ans *= 2;
            i = i+idle;
        }
        i++;
    }
    <span style="color:#00a">return</span> ans;
}</code></pre></td></tr></table>
</div>
</div>
</div>
</div>

  </div>
</div>

      <footer>
        <hr>
        <small>
          &copy; 2022
          <a href="https://siwei.dev/" target="_blank">siwei.dev</a>
        </small>
      </footer>
      <br/>
    </div> 

    
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T" crossorigin="anonymous"></script>
    <script>

      (function(){
        let first = true;
        $(".tab-content").children(".lang").each(function () {
          let tabId = $(this).attr("id");
          let tabName = tabId.charAt(0).toUpperCase() + tabId.slice(1);
          $(".tabs").append($(`<div class="tab-btn ${first?"tab-btn-active":""}" onclick="showLang(event, '${tabId}')">${tabName}</div>`));
          first = false;
        });

        $(".lang").slice(1).each(function() {
          $(this).hide();
        })
      })();

      function showLang(evt, lang) {
        var i;
        var x = document.getElementsByClassName("lang");
        for (i = 0; i < x.length; i++) {
          x[i].style.display = "none";
        }
        document.getElementById(lang).style.display = "block";
      
        tablinks = document.getElementsByClassName("tab-btn");
        for (i = 0; i < x.length; i++) {
          tablinks[i].className = tablinks[i].className.replace(" tab-btn-active", "");
        }
        document.getElementById(lang).style.display = "block";
        evt.currentTarget.className += " tab-btn-active";
      }
    </script>
  </body>
</html>

